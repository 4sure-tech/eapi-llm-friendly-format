{"openapi":"3.0.0","paths":{"/api/lob/{lob_id}/schema/draft":{"post":{"operationId":"SchemaController_createSchema","summary":"Create and register Schema on a public registry","parameters":[{"name":"lob_id","required":true,"in":"path","description":"LOB id","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Save schema","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSchemaRequest"}}}},"responses":{"201":{"description":"API successfully created new records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDraftSchemaResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credentials"],"security":[{"api-key":[]}]}},"/api/lob/{lob_id}/schema/{schema_id}/oca":{"post":{"operationId":"SchemaController_createSchemaOCA","summary":"Add OCA details to Schema","parameters":[{"name":"lob_id","required":true,"in":"path","description":"LOB id","schema":{"type":"string"}},{"name":"schema_id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"description":"Save schema","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialBrandingRequest"}}}},"responses":{"201":{"description":"API successfully created new records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSchemaResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credentials"],"security":[{"api-key":[]}]}},"/api/lob/{lob_id}/schema/register":{"post":{"operationId":"SchemaController_registerSchema","summary":"Register Schema on a public registry","parameters":[{"name":"lob_id","required":true,"in":"path","description":"LOB id","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Register schema","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterSchemaRequest"}}}},"responses":{"201":{"description":"API successfully created new records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSchemaResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credentials"],"security":[{"api-key":[]}]}},"/api/lob/{lob_id}/schemas":{"get":{"operationId":"SchemaController_getSchemas","summary":"Retrieve all Schemas","parameters":[{"name":"page","required":false,"in":"query","example":1,"schema":{}},{"name":"limit","required":false,"in":"query","example":10,"schema":{}},{"name":"search","required":false,"in":"query","example":"driving_license","schema":{}},{"name":"state","required":false,"in":"query","schema":{"enum":["draft","available"],"type":"string"}},{"name":"lob_id","required":true,"in":"path","description":"LOB id","schema":{}}],"responses":{"200":{"description":"Schema list fetched successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SchemaResponse"}}}},"400":{"description":"bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"api not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credentials"],"security":[{"api-key":[]}]}},"/api/lob/{lob_id}/cred-def":{"post":{"operationId":"CredDefController_createCredDef","summary":"Create Credential definition on a public registry","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Create credential definition","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCredDefRequest"}}}},"responses":{"201":{"description":"API successfully created new records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCredDefResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credential-definition"],"security":[{"api-key":[]}]}},"/api/lob/{lob_id}/cred-defs":{"get":{"operationId":"CredDefController_getCredDefs","summary":"Retrieve all Credential definitions","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","example":1,"schema":{}},{"name":"limit","required":false,"in":"query","example":10,"schema":{}},{"name":"search","required":false,"in":"query","example":"Driving_License","schema":{}}],"responses":{"200":{"description":"API request processed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredDefResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["credential-definition"],"security":[{"api-key":[]}]}}},"info":{"title":"Orbit Credential Management API","description":"Credential Management API is a SAAS service that Issuer entity uses to create cred-def and schemas.","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"api-key":{"type":"apiKey","in":"header","name":"api-key"}},"schemas":{"BadRequestResponse":{"type":"object","properties":{"message":{"type":"string","example":"A required parameter was missing in the request"},"error":{"type":"string","example":"Bad Request"},"statusCode":{"type":"number","example":400}},"required":["message","error","statusCode"]},"UnauthorizedResponse":{"type":"object","properties":{"message":{"type":"string","example":"Invalid API Key included in the request"},"error":{"type":"string","example":"UnauthorizedException"},"statusCode":{"type":"number","example":401}},"required":["message","error","statusCode"]},"NotFoundErrorResponse":{"type":"object","properties":{"message":{"type":"string","example":"URL cannot be found"},"error":{"type":"string","example":"Not Found"},"statusCode":{"type":"number","example":404}},"required":["message","error","statusCode"]},"InternalServerErrorResponse":{"type":"object","properties":{"message":{"type":"string","example":"The server encountered an unexpected condition that prevented it from fulfilling the request"},"error":{"type":"string","example":"InternalServerErrorException"},"statusCode":{"type":"number","example":500}},"required":["message","error","statusCode"]},"SchemaInfoRequest":{"type":"object","properties":{"schemaName":{"type":"string","example":"Driving_license","description":"The name of the schema."},"schemaVersion":{"type":"string","example":"1.0","pattern":"^[0-9.]+$","description":"The version of the schema."},"governanceUrl":{"type":"string","example":"https://mining.ca.governance","description":"The governance URL for the schema."},"credentialFormat":{"type":"string","enum":["ANONCRED","JSON_LD","vc+sd-jwt"],"example":"ANONCRED","description":"The format of the credential for the schema."}},"required":["schemaName","schemaVersion","governanceUrl","credentialFormat"]},"SchemaAttributeRequest":{"type":"object","properties":{"orderNo":{"type":"number","example":1,"description":"The order number of the attribute in the schema."},"attributeName":{"type":"string","example":"full_name","description":"The name of the attribute in the schema."},"displayName":{"type":"string","example":"Full name","description":"The display name of the attribute."},"dataType":{"type":"string","example":"text","description":"The data type of the attribute."},"parentCategoryName":{"type":"string","example":"Category1","description":"The name of the parent category if any."},"categoryName":{"type":"string","example":"Category2","description":"The name of the category this attribute belongs to."},"isRequired":{"type":"boolean","example":true,"description":"Indicates if the attribute is required."},"isRestricted":{"type":"boolean","example":true,"description":"Indicates if the attribute is restricted."},"isRestrictedBoolean":{"type":"boolean","example":true,"description":"A boolean indicating if the attribute has restricted values."},"restrictedValues":{"description":"An array of restricted values for the attribute.","type":"array","items":{"type":"string"}}},"required":["orderNo","attributeName","displayName","dataType","categoryName","isRequired","isRestricted","isRestrictedBoolean"]},"CreateAttributeCategoryRequest":{"type":"object","properties":{"name":{"type":"string","example":"Category2"},"description":{"type":"string","example":"Category 2 description"}},"required":["name","description"]},"CreateSchemaRequest":{"type":"object","properties":{"schemaInfo":{"$ref":"#/components/schemas/SchemaInfoRequest"},"attributes":{"type":"array","items":{"$ref":"#/components/schemas/SchemaAttributeRequest"}},"attributeCategories":{"type":"array","items":{"$ref":"#/components/schemas/CreateAttributeCategoryRequest"}},"isDraft":{"type":"boolean","example":true,"description":"Indicates if the schema is a draft or not."}},"required":["schemaInfo","attributes","isDraft"]},"SchemaDraftResponse":{"type":"object","properties":{"schemaDraftId":{"type":"number","description":"The ID of the schema.","example":1},"schemaState":{"type":"string","enum":["draft","available"],"example":"draft","description":"The state of the schema."},"schemaLedgerId":{"type":"string","description":"Schema identifier","example":"WgWxqztrNooG92RXvxSTWv:2:schema_name:1.0"}},"required":["schemaDraftId","schemaState"]},"CreateDraftSchemaResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"Schema created successfully!","description":"Standardized description of the response body for series 200, 300, 400 and 500 response"},"data":{"$ref":"#/components/schemas/SchemaDraftResponse"}},"required":["success","message","data"]},"CredentialBrandingRequest":{"type":"object","properties":{"primaryAttribute":{"type":"string","description":"The primary attribute used for branding.","example":"full_name"},"secondaryAttribute":{"type":"string","example":"age","description":"The secondary attribute used for branding."},"orgLogo":{"type":"string","example":"https://nborbit.com/logo.png","description":"URL or path to the organization’s logo."},"backgroundImage":{"type":"string","example":"https://nborbit.com/bg.png","description":"URL or path to the background image for branding."},"backgroundImageSlice":{"type":"string","example":"https://nborbit.com/bg-slice.png","description":"URL or path to the sliced background image for branding."},"primaryBackgroundColor":{"type":"string","example":"#FF5733","description":"Primary background color in hexadecimal format."},"secondaryBackgroundColor":{"type":"string","example":"#FF5733","description":"Secondary background color in hexadecimal format."}}},"SchemaResponseDetails":{"type":"object","properties":{"schemaId":{"type":"number","description":"The ID of the schema.","example":1},"schemaState":{"type":"string","enum":["draft","available"],"example":"available","description":"The state of the schema."},"schemaLedgerId":{"type":"string","description":"Schema identifier","example":"WgWxqztrNooG92RXvxSTWv:2:schema_name:1.0"}},"required":["schemaId","schemaState"]},"CreateSchemaResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"Schema created successfully!","description":"Standardized description of the response body for series 200, 300, 400 and 500 response"},"data":{"$ref":"#/components/schemas/SchemaResponseDetails"}},"required":["success","message","data"]},"RegisterSchemaRequest":{"type":"object","properties":{"schemaDraftId":{"type":"number","example":1,"description":"The draft ID of the schema to be registered."}},"required":["schemaDraftId"]},"SchemaEntity":{"type":"object","properties":{"schemaId":{"type":"string","example":1},"schemaName":{"type":"string","example":"driving_license"},"schemaVersion":{"type":"string","example":"1.0"},"attributes":{"example":[{"attributeName":"full_name","displayName":"Full name","dataType":"text","categoryId":4,"isRequired":true,"isRestricted":true,"isRestrictedBoolean":true,"restrictedValues":["string"],"parentCategoryName":"Category1","categoryName":"Category1"}],"type":"array","items":{"type":"string"}},"schemaLedgerId":{"type":"string","example":"DYdwgDros8UtJtakNvjJzV:2:Driving_license:2.0"},"issuerDid":{"type":"object","example":"DYdwgDros8UtJtakNvjJzV"},"governanceURL":{"type":"string","example":"https://rto.ca.governance"},"credentialFormat":{"type":"string","example":"Anoncred"},"state":{"type":"string","example":"available"},"primaryAttribute":{"type":"string","example":"full_name"},"secondaryAttribute":{"type":"string","example":"age"},"orgLogo":{"type":"string","example":"https://nborbit.com/logo.png"},"backgroundImage":{"type":"string","example":"https://nborbit.com/bg.png"},"backgroundImageSlice":{"type":"string","example":"https://nborbit.com/bg-slice.png"},"primaryBackgroundColor":{"type":"string","example":"#FF5733"},"secondaryBackgroundColor":{"type":"string","example":"#FF5733"},"endorsementState":{"type":"string","example":"transaction_endorsed"},"transactionId":{"type":"string","example":"3fa85f64-5717-4562-b3fc-2c963f66afa6"},"createdAt":{"format":"date-time","type":"string","example":"2024-06-28T17:01:30.642Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-06-28T17:01:30.642Z"},"createdBy":{"type":"number","example":1},"lastChangedBy":{"type":"number","example":1}},"required":["schemaName","schemaVersion","credentialFormat","state","createdAt","updatedAt","createdBy","lastChangedBy"]},"PaginationMeta":{"type":"object","properties":{"totalItems":{"type":"number","example":100,"description":"The total number of items available in the dataset."},"itemCount":{"type":"number","example":10,"description":"The number of items on the current page."},"itemsPerPage":{"type":"number","example":10,"description":"The number of items displayed per page."},"totalPages":{"type":"number","example":10,"description":"The total number of pages available based on the dataset size and items per page."},"currentPage":{"type":"number","example":1,"description":"The current page number being viewed."}},"required":["totalItems","itemCount","itemsPerPage","totalPages","currentPage"]},"GetSchemaRecord":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/SchemaEntity"}},"meta":{"$ref":"#/components/schemas/PaginationMeta"}},"required":["items","meta"]},"SchemaResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"Schema fetched successfully!","description":"Standardized description of the response body for series 200, 300, 400 and 500 response"},"data":{"$ref":"#/components/schemas/GetSchemaRecord"}},"required":["success","message","data"]},"CreateCredDefRequest":{"type":"object","properties":{"schemaId":{"type":"number","example":1,"description":"The identifier of the schema associated with this credential definition."},"tag":{"type":"string","example":"Driving_License","description":"A tag used to categorize the credential definition."},"displayName":{"type":"string","example":"Driving License","description":"The display name of the credential definition."},"supportRevocation":{"type":"boolean","example":false,"description":"Indicates whether revocation is supported for this credential definition."},"revocationRegistrySize":{"type":"number","example":100,"description":"The size of the revocation registry (if revocation is supported)."},"description":{"type":"string","description":"Description of the credential definition","example":"Driving license issued by Northern Block"},"issuerName":{"type":"string","description":"Name of the issuer","example":"Northern block"},"primaryAttribute":{"type":"string","description":"Name of one of the attribute","example":"full_name"},"secondaryAttribute":{"type":"string","description":"year","example":"2025"},"orgLogo":{"type":"string","description":"The logo of the organization issuing the credential (optional).","example":"https://nborbit.com/logo.png"},"backgroundImage":{"type":"string","description":"Background image for the credential definition (optional).","example":"https://nborbit.com/bg.png"},"backgroundImageSlice":{"type":"string","description":"Slice of the background image for the credential (optional).","example":"https://nborbit.com/bg-slice.png"},"primaryBackgroundColor":{"type":"string","example":"#FFFFFF","description":"The primary background color of the credential, in hexadecimal format (optional)."},"secondaryBackgroundColor":{"type":"string","example":"#FFFFFF","description":"The secondary background color of the credential, in hexadecimal format."}},"required":["schemaId","tag","displayName","supportRevocation","description","issuerName","primaryAttribute","secondaryBackgroundColor"]},"CreateCredDef":{"type":"object","properties":{"credentialDefinitionId":{"type":"string","example":"Ud5n8k3RnY8EkVHRfUyRri:3:CL:896218:Driving_License2","description":"The unique identifier for the created credential definition."},"credentialId":{"type":"string","example":3,"description":"The identifier for the credential associated with this definition."}},"required":["credentialDefinitionId","credentialId"]},"CreateCredDefResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"credential defination created successfully.","description":"Standardized description of the response body for series 200, 300, 400 and 500 response"},"data":{"$ref":"#/components/schemas/CreateCredDef"}},"required":["success","message","data"]},"GetCredDefResponse":{"type":"object","properties":{"schemaId":{"type":"number","example":1,"description":"The identifier of the schema associated with this credential definition."},"tag":{"type":"string","example":"Driving_License","description":"A tag used to categorize the credential definition."},"displayName":{"type":"string","example":"Driving License","description":"The display name of the credential definition."},"supportRevocation":{"type":"boolean","example":false,"description":"Indicates whether revocation is supported for this credential definition."},"revocationRegistrySize":{"type":"number","example":100,"description":"The size of the revocation registry (if revocation is supported)."},"description":{"type":"string","description":"Description of the credential definition","example":"Driving license issued by Northern Block"},"issuerName":{"type":"string","description":"Name of the issuer","example":"Northern block"},"primaryAttribute":{"type":"string","description":"Name of one of the attribute","example":"full_name"},"secondaryAttribute":{"type":"string","description":"year","example":"2025"},"orgLogo":{"type":"string","description":"The logo of the organization issuing the credential (optional).","example":"https://nborbit.com/logo.png"},"backgroundImage":{"type":"string","description":"Background image for the credential definition (optional).","example":"https://nborbit.com/bg.png"},"backgroundImageSlice":{"type":"string","description":"Slice of the background image for the credential (optional).","example":"https://nborbit.com/bg-slice.png"},"primaryBackgroundColor":{"type":"string","example":"#FFFFFF","description":"The primary background color of the credential, in hexadecimal format (optional)."},"secondaryBackgroundColor":{"type":"string","example":"#FFFFFF","description":"The secondary background color of the credential, in hexadecimal format."},"credDefnId":{"type":"string","description":"Unique identifier for the credential definition","example":"N8DFqk7wvSdd6XGFarfd4r:3:CL:1082917:Drivers_licence"},"credentialId":{"type":"number","example":3,"description":"The identifier for the credential associated with this definition."},"credIssuerId":{"type":"string","description":"DID or identifier of the issuing authority/organization","example":"did:sov:N8DFqk7wvSdd6XGFarfd4r"}},"required":["schemaId","tag","displayName","supportRevocation","description","issuerName","primaryAttribute","secondaryBackgroundColor","credDefnId","credentialId","credIssuerId"]},"GetCredDefRecord":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/GetCredDefResponse"}},"meta":{"$ref":"#/components/schemas/PaginationMeta"}},"required":["items","meta"]},"CredDefResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"Credential definition fetched successfully!","description":"Standardized description of the response body for series 200, 300, 400 and 500 response"},"data":{"$ref":"#/components/schemas/GetCredDefRecord"}},"required":["success","message","data"]}}}}